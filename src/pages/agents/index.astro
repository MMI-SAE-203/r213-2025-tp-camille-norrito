---
import Base from "../../layouts/Base.astro";
import { getAllAgents } from "../../backend.mjs";

// Récupérer tous les agents
const agents = await getAllAgents();
---

<Base>
    <div class="container mx-auto px-4 py-10">
        <h1 class="text-3xl font-bold mb-6">Nos Agents</h1>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            {agents.map((agent) => (
                <div class="bg-white shadow-lg rounded-lg p-4 text-center">
                    <h2 class="text-xl font-bold">{agent.nom} {agent.prenom}</h2>
                    <p class="text-gray-600">{agent.email}</p>
                    
                    <!-- Bouton pour voir les offres de cet agent -->
                    <a href={`/agents/${agent.id}`} class="mt-4 inline-block bg-blue-500 text-white px-4 py-2 rounded-lg">
                        Voir les offres
                    </a>
                </div>
            ))}
        </div>
    </div>
</Base>
